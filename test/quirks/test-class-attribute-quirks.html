<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>NWMatcher HTML5 elements selection test</title>
<!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
<script type="text/javascript" src="../../src/nwmatcher.js"></script>
<!--
<script type="text/javascript" src="../../src/nwmatcher-base.js"></script>
<script type="text/javascript" src="../../src/modules/nwmatcher-pseudos.js"></script>
-->
<style type="text/css">
.pass { color: #0c0; }
.fail { color: #c00; }
</style>
</head>
<body>

<h1>NWMatcher: test class attribute in Quirks Mode</h1>

<p>Using NWMatcher select method</p>

<div id="dom">
	<div id="d1" class="foobar">Lower case classname</div>
	<div id="d2" class="fooBar">Mixed case classname</div>
	<div id="d3" class="FOOBAR">Upper case classname</div>
</div>

<p>Using querySelectorAll method</p>

<div id="qsa">
	<div id="q1" class="foobar">Lower case classname</div>
	<div id="q2" class="fooBar">Mixed case classname</div>
	<div id="q3" class="FOOBAR">Upper case classname</div>
</div>

<hr>

<script type="text/javascript">

window.onload = function() {

  function log(msg) {
    document.body.appendChild(document.createElement('div')).innerHTML = msg;
  }

  var i, l, outer, real, temp;

  outer = document.getElementById('dom');
  temp = NW.Dom.select('#dom [class~=foobar]');
  real = Array.prototype.slice.call(outer.getElementsByClassName('foobar'), 0);

  log('--- TESTED USING nwmatcher NW.Dom.select --- ' + temp.length + ' elements found');

  for (i = 0, l = real.length; l > i; ++i) {
    if (real[i] === temp[i]/* && real[i].className.toLowerCase().indexOf('foobar') > -1 */) {
      real[i].className += ' pass';
      real[i].innerHTML += ' - PASSED';
    } else {
      real[i].className += ' fail';
      real[i].innerHTML += ' - FAILED';
    }
  }

  outer = document.getElementById('qsa');
  temp = document.querySelectorAll('#qsa [class~=foobar]');
  real = Array.prototype.slice.call(outer.getElementsByClassName('foobar'), 0);

  log('--- TESTED USING document.querySelectorAll --- ' + temp.length + ' elements found');

  for (i = 0, l = real.length; l > i; ++i) {
    if (real[i] === temp[i]/* && real[i].className.toLowerCase().indexOf('foobar') > -1 */) {
      real[i].className += ' pass';
      real[i].innerHTML += ' - PASSED';
    } else {
      real[i].className += ' fail';
      real[i].innerHTML += ' - FAILED';
    }
  }


};

</script>

</body>
</html>
